REGISTRATION + ONBOARDING + ACCESS CONTROL API FLOW

GLOBAL RULE (BACKEND):
- All business API require:
  IsAuthenticated + IsOnboardingCompleted
- Until onboarding_status == "completed":
  → any non-onboarding API returns 403

────────────────────────────────

1. Registration
POST /api/users/register/
→ create user

2. Login
POST /api/token/
→ access + refresh tokens

3. App entry point (ALWAYS)
GET /api/organization/status/
Auth: Bearer access

Response:
{
  "onboarding_status": "not_started" | "org_type" | "tax_regime" | "activities" | "completed"
}

Frontend rule:
- if completed → open main app
- else → redirect to /onboarding/{step}

────────────────────────────────
ONBOARDING API (ALLOWED BEFORE COMPLETION)
(permission: IsAuthenticated only)

4. Organization profile
GET /api/organization/profile/

5. Step: Organization type
PATCH /api/organization/profile/
{
  "org_type": "ie" | "llc"
}

6. Step: Tax regime
PATCH /api/organization/profile/
{
  "tax_regime": "single" | "general"
}

7. Step: Activities
GET  /api/activities/                  (dictionary)
GET  /api/organization/activities/
POST /api/organization/activities/
{
  "activity": <id>,
  "cash_tax_rate": "2.00",
  "non_cash_tax_rate": "3.00",
  "is_primary": true
}

Rules:
- at least one activity
- only one primary activity

8. Finalize onboarding
POST /api/organization/finalize/
→ onboarding_status = "completed"

────────────────────────────────
AFTER ONBOARDING (BUSINESS API UNLOCKED)

9. Re-check status
GET /api/organization/status/
→ completed

10. Main app access
/finance/*
→ allowed (200)

If onboarding not completed:
→ 403 "Onboarding not completed"